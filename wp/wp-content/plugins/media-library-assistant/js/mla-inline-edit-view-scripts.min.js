var ajaxurl,jQuery,inlineEditView,mla_inline_edit_view_vars;(function(a){inlineEditView={init:function(){var c=this,d=a("#inline-edit"),b=a("#bulk-edit");c.type="view";c.what="#view-";d.keyup(function(f){if(f.which==27){return inlineEditView.revert()}});b.keyup(function(f){if(f.which==27){return inlineEditView.revert()}});a("a.cancel",d).click(function(){return inlineEditView.revert()});a("a.save",d).click(function(){return inlineEditView.save(this)});a("td",d).keydown(function(f){if(f.which==13){return inlineEditView.save(this)}});a("a.cancel",b).click(function(){return inlineEditView.revert()});a("a.editinline").live("click",function(){inlineEditView.edit(this);return false});a("#doaction, #doaction2").click(function(f){var g=a(this).attr("id").substr(2);if(a('select[name="'+g+'"]').val()=="edit"){f.preventDefault();c.setBulk()}else{if(a("form#posts-filter tr.inline-editor").length>0){c.revert()}}})},toggle:function(c){var b=this;if("none"==a(b.what+b.getId(c)).css("display")){b.revert()}else{b.edit(c)}},setBulk:function(){var b="",d=true;this.revert();a("#bulk-edit td").attr("colspan",a("th:visible, td:visible",".widefat:first thead").length);a("table.widefat tbody").prepend(a("#bulk-edit"));a("#bulk-edit").addClass("inline-editor").show();a('tbody th.check-column input[type="checkbox"]').each(function(){if(a(this).prop("checked")){d=false;var e=a(this).val(),c;c=a("#inline_"+e+" .slug").text()||mla_inline_edit_view_vars.notitle;b+='<div id="ttle'+e+'"><a id="_'+e+'" class="ntdelbutton" title="'+mla_inline_edit_view_vars.ntdeltitle+'">X</a>'+c+"</div>"}});if(d){return this.revert()}a("#bulk-titles").html(b);a("#bulk-titles a").click(function(){var c=a(this).attr("id").substr(1);a('table.widefat input[value="'+c+'"]').prop("checked",false);a("#ttle"+c).remove()});a("html, body").animate({scrollTop:0},"fast")},edit:function(h){var d=this,b,f,c,e,g;d.revert();if(typeof(h)=="object"){h=d.getId(h)}b=mla_inline_edit_view_vars.fields;f=mla_inline_edit_view_vars.checkboxes;c=a("#inline-edit").clone(true);a("td",c).attr("colspan",a("th:visible, td:visible",".widefat:first thead").length);if(a(d.what+h).hasClass("alternate")){a(c).addClass("alternate")}a(d.what+h).hide().after(c);e=a("#inline_"+h);for(g=0;g<b.length;g++){a(':input[name="'+b[g]+'"]',c).val(a("."+b[g],e).text())}for(g=0;g<b.length;g++){if("1"==a("."+f[g],e).text()){a(':input[name="'+f[g]+'"]',c).attr("checked","checked")}else{a(':input[name="'+f[g]+'"]',c).removeAttr("checked")}}a(c).attr("id","edit-"+h).addClass("inline-editor").show();a(".ptitle",c).focus();return false},save:function(d){var c,b;if(typeof(d)=="object"){d=this.getId(d)}if(mla_inline_edit_view_vars.useSpinnerClass){a("table.widefat .spinner").addClass("is-active")}else{a("table.widefat .spinner").show()}c={action:mla_inline_edit_view_vars.ajax_action,mla_admin_nonce:mla_inline_edit_view_vars.ajax_nonce,post_ID:d};b=a("#edit-"+d+" :input").serialize();c=b+"&"+a.param(c);a.post(ajaxurl,c,function(e){if(mla_inline_edit_view_vars.useSpinnerClass){a("table.widefat .spinner").removeClass("is-active")}else{a("table.widefat .spinner").hide()}if(e){if(-1!=e.indexOf("<tr")){a(inlineEditView.what+d).remove();a("#edit-"+d).before(e).remove();a(inlineEditView.what+d).hide().fadeIn()}else{e=e.replace(/<.[^<>]*?>/g,"");a("#edit-"+d+" .inline-edit-save .error").html(e).show()}}else{a("#edit-"+d+" .inline-edit-save .error").html(mla_inline_edit_view_vars.error).show()}},"html");return false},revert:function(){var b=a("table.widefat tr.inline-editor").attr("id");if(b){a("table.widefat .inline-edit-save .waiting").hide();if("bulk-edit"==b){a("table.widefat #bulk-edit").removeClass("inline-editor").hide();a("#bulk-titles").html("");a("#inlineedit").append(a("#bulk-edit"))}else{if(mla_inline_edit_view_vars.useSpinnerClass){a("table.widefat .spinner").removeClass("is-active")}else{a("table.widefat .spinner").hide()}a("#"+b).remove();b=b.substr(b.lastIndexOf("-")+1);a(this.what+b).show()}}return false},getId:function(c){var d=a(c).closest("tr").attr("id"),b=d.split("-");return b[b.length-1]}};a(document).ready(function(){inlineEditView.init()})})(jQuery);