!function(i){var a;i(".preview_image_box").on("click",function(t){t.preventDefault();var e=i(this),n=e.next("input");(a=a||wp.media({title:sn_lang.media_frame_title,button:{text:sn_lang.media_frame_button},multiple:!1})).on("select",function(){var t=a.state().get("selection").first().toJSON();n.val(t.url),e.addClass("has_image").find("img").attr("src",t.url)}),a.open()}),i(".preview_image_box .remove-image").on("click",function(t){t.stopPropagation(),t.preventDefault();var e=i(this).parents(".preview_image_box");e.removeClass("has_image"),e.next("input").val(null)}),i(".slack_test_integration").on("click",function(t){t.preventDefault();var e=i(this),n=e.next("input");e.removeClass("testing ok error").addClass("testing"),i.ajax({url:ajaxurl,method:"POST",dataType:"json",data:{action:"slack-test-integration"},success:function(t){e.removeClass("testing ok error"),t.success?(e.addClass("ok"),n.val("1")):(e.addClass("error"),n.val("0"))}})}),i('a.page-title-action[href="#new_notification"]').on("click",function(t){t.preventDefault();var e=i("#notification_box").html();i(e).clone().appendTo(".notifications-wrapper")}),i(document).on("click",".notification-box .notification-header",function(t){t.preventDefault(),i(this).next(".notification-settings").slideToggle(),i(this).parent(".notification-box").toggleClass("open")}),i(document).on("change",".notification-box select",function(){var t="",e=i(this).parents(".notification-box"),n=e.find("select.notification-type");i(this).hasClass("notification-type")&&(e.find("select.notification_options").removeClass("current").hide(),e.find('select[name="notification[action]['+n.val()+'][]"]').addClass("current").show());var a=e.find('select[name="notification[action]['+n.val()+'][]"]');t="["+(t=n.find('option[value="'+n.val()+'"]').text())+"] "+a.find('option[value="'+a.val()+'"]').text(),e.find("h2").text(t),e.find('input[name="notification[title][]"]').val(t)}),i(document).on("click",".remove-notification",function(t){t.preventDefault(),i(this).parents(".notification-box").remove()}),i(".copy-report").on("click",function(t){t.preventDefault(),i("#slack_tech_data").select(),document.execCommand("copy")}),i("#slack_clear_logs").on("click",function(t){t.preventDefault();var e=i(this),n=e.prev().prev("textarea");e.removeClass("working ok error").addClass("working"),i.ajax({url:ajaxurl,method:"POST",dataType:"json",data:{action:"slack-clear-logs"},success:function(t){e.removeClass("working ok error"),t.success?(e.addClass("ok"),n.val("")):e.addClass("error")}})})}(jQuery);